{"id":"../node_modules/recursive-watch/index.js","dependencies":[{"name":"/Users/sonamchoeda/Desktop/REACT-PROJECTS/three-js/package.json","includedInParent":true,"mtime":1676236562742},{"name":"/Users/sonamchoeda/Desktop/REACT-PROJECTS/three-js/node_modules/recursive-watch/package.json","includedInParent":true,"mtime":1676236536552},{"name":"os","loc":{"line":1,"column":17,"index":17},"parent":"/Users/sonamchoeda/Desktop/REACT-PROJECTS/three-js/node_modules/recursive-watch/index.js","resolved":"/Users/sonamchoeda/.nvm/versions/node/v14.18.0/lib/node_modules/parcel-bundler/node_modules/os-browserify/browser.js"},{"name":"fs","loc":{"line":2,"column":17,"index":40},"parent":"/Users/sonamchoeda/Desktop/REACT-PROJECTS/three-js/node_modules/recursive-watch/index.js","resolved":"/Users/sonamchoeda/.nvm/versions/node/v14.18.0/lib/node_modules/parcel-bundler/src/builtins/_empty.js"},{"name":"path","loc":{"line":3,"column":19,"index":65},"parent":"/Users/sonamchoeda/Desktop/REACT-PROJECTS/three-js/node_modules/recursive-watch/index.js","resolved":"/Users/sonamchoeda/.nvm/versions/node/v14.18.0/lib/node_modules/parcel-bundler/node_modules/path-browserify/index.js"},{"name":"ttl","loc":{"line":4,"column":20,"index":93},"parent":"/Users/sonamchoeda/Desktop/REACT-PROJECTS/three-js/node_modules/recursive-watch/index.js","resolved":"/Users/sonamchoeda/Desktop/REACT-PROJECTS/three-js/node_modules/ttl/index.js"}],"generated":{"js":"var os = require('os')\nvar fs = require('fs')\nvar path = require('path')\nvar Cache = require('ttl')\n\nvar isLinux = os.platform() === 'linux' // native recursive watching not supported here\nvar watchDirectory = isLinux ? watchFallback : watchRecursive\n\nmodule.exports = watch\n\nfunction watch (name, onchange) {\n  var clear = null\n  var stopped = false\n\n  fs.lstat(name, function (_, st) {\n    if (!st || stopped) {\n      stopped = true\n      return\n    }\n    clear = st.isDirectory() ? watchDirectory(name, onchange) : watchFile(name, onchange)\n  })\n\n  return function () {\n    if (stopped) return\n    stopped = true\n    if (clear) {\n      clear()\n    }\n  }\n}\n\nfunction watchFile (filename, onchange) {\n  var prev = null\n  var prevTime = 0\n\n  var w = fs.watch(filename, function () {\n    fs.lstat(filename, function (_, st) {\n      var now = Date.now()\n      if (now - prevTime > 2000 || !same(st, prev)) onchange(filename)\n      prevTime = now\n      prev = st\n    })\n  })\n\n  return function () {\n    w.close()\n  }\n}\n\nfunction watchRecursive (directory, onchange) {\n  var w = fs.watch(directory, {recursive: true}, function (change, filename) {\n    if (!filename) return // filename not always given (https://nodejs.org/api/fs.html#fs_filename_argument)\n    onchange(path.join(directory, filename))\n  })\n\n  return function () {\n    w.close()\n  }\n}\n\nfunction watchFallback (directory, onchange) {\n  var watching = {}\n  var loaded = false\n  var queued = []\n  var prevs = new Cache({ttl: 2e3, capacity: 30})\n\n  visit('.', function () {\n    loaded = true\n  })\n\n  return function () {\n    Object.keys(watching).forEach(function (dir) {\n      watching[dir].close()\n    })\n  }\n\n  function emit (name) {\n    queued.push(name)\n    if (queued.length === 1) update()\n  }\n\n  function update () {\n    var filename = queued[0]\n\n    fs.lstat(filename, function (err, st) {\n      var w = watching[filename]\n\n      if (err && w) {\n        w.close()\n        delete watching[filename]\n      }\n\n      var prevSt = prevs.get(filename)\n      if (!prevSt || !same(st, prevSt)) onchange(filename)\n      prevs.put(filename, st)\n\n      visit(path.relative(directory, filename), function () {\n        queued.shift()\n        if (queued.length) update()\n      })\n    })\n  }\n\n  function visit (next, cb) {\n    var dir = path.join(directory, next)\n\n    fs.lstat(dir, function (err, st) {\n      if (err || !st.isDirectory()) return cb()\n      if (watching[dir]) return cb()\n      if (loaded) emit(dir)\n\n      var w = fs.watch(dir, function (change, filename) {\n        filename = path.join(next, filename)\n        emit(path.join(directory, filename))\n      })\n\n      w.on('error', noop)\n      watching[dir] = w\n\n      fs.readdir(dir, function (err, list) {\n        if (err) return cb(err)\n\n        loop()\n\n        function loop () {\n          if (!list.length) return cb()\n          visit(path.join(next, list.shift()), loop)\n        }\n      })\n    })\n  }\n}\n\nfunction noop () {}\n\nfunction same (a, b) {\n  if (!a || !b) return false\n  return a.dev === b.dev &&\n    a.mode === b.mode &&\n    a.nlink === b.nlink &&\n    a.uid === b.uid &&\n    a.gid === b.gid &&\n    a.rdev === b.rdev &&\n    a.blksize === b.blksize &&\n    a.ino === b.ino &&\n    // a.size === b.size && DONT TEST - is a lying value\n    // a.blocks === b.blocks && DONT TEST - is a lying value\n    a.atime.getTime() === b.atime.getTime() &&\n    a.mtime.getTime() === b.mtime.getTime() &&\n    a.ctime.getTime() === b.ctime.getTime()\n}\n"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/recursive-watch/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":78,"column":0},"generated":{"line":78,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":79,"column":0},"generated":{"line":79,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":80,"column":0},"generated":{"line":80,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":81,"column":0},"generated":{"line":81,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":82,"column":0},"generated":{"line":82,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":83,"column":0},"generated":{"line":83,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":84,"column":0},"generated":{"line":84,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":85,"column":0},"generated":{"line":85,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":86,"column":0},"generated":{"line":86,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":87,"column":0},"generated":{"line":87,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":88,"column":0},"generated":{"line":88,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":89,"column":0},"generated":{"line":89,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":90,"column":0},"generated":{"line":90,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":91,"column":0},"generated":{"line":91,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":92,"column":0},"generated":{"line":92,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":93,"column":0},"generated":{"line":93,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":94,"column":0},"generated":{"line":94,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":95,"column":0},"generated":{"line":95,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":96,"column":0},"generated":{"line":96,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":97,"column":0},"generated":{"line":97,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":98,"column":0},"generated":{"line":98,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":99,"column":0},"generated":{"line":99,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":100,"column":0},"generated":{"line":100,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":101,"column":0},"generated":{"line":101,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":102,"column":0},"generated":{"line":102,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":103,"column":0},"generated":{"line":103,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":104,"column":0},"generated":{"line":104,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":105,"column":0},"generated":{"line":105,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":106,"column":0},"generated":{"line":106,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":107,"column":0},"generated":{"line":107,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":108,"column":0},"generated":{"line":108,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":109,"column":0},"generated":{"line":109,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":110,"column":0},"generated":{"line":110,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":111,"column":0},"generated":{"line":111,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":112,"column":0},"generated":{"line":112,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":113,"column":0},"generated":{"line":113,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":114,"column":0},"generated":{"line":114,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":115,"column":0},"generated":{"line":115,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":116,"column":0},"generated":{"line":116,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":117,"column":0},"generated":{"line":117,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":118,"column":0},"generated":{"line":118,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":119,"column":0},"generated":{"line":119,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":120,"column":0},"generated":{"line":120,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":121,"column":0},"generated":{"line":121,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":122,"column":0},"generated":{"line":122,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":123,"column":0},"generated":{"line":123,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":124,"column":0},"generated":{"line":124,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":125,"column":0},"generated":{"line":125,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":126,"column":0},"generated":{"line":126,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":127,"column":0},"generated":{"line":127,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":128,"column":0},"generated":{"line":128,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":129,"column":0},"generated":{"line":129,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":130,"column":0},"generated":{"line":130,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":131,"column":0},"generated":{"line":131,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":132,"column":0},"generated":{"line":132,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":133,"column":0},"generated":{"line":133,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":134,"column":0},"generated":{"line":134,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":135,"column":0},"generated":{"line":135,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":136,"column":0},"generated":{"line":136,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":137,"column":0},"generated":{"line":137,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":138,"column":0},"generated":{"line":138,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":139,"column":0},"generated":{"line":139,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":140,"column":0},"generated":{"line":140,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":141,"column":0},"generated":{"line":141,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":142,"column":0},"generated":{"line":142,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":143,"column":0},"generated":{"line":143,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":144,"column":0},"generated":{"line":144,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":145,"column":0},"generated":{"line":145,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":146,"column":0},"generated":{"line":146,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":147,"column":0},"generated":{"line":147,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":148,"column":0},"generated":{"line":148,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":149,"column":0},"generated":{"line":149,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":150,"column":0},"generated":{"line":150,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":151,"column":0},"generated":{"line":151,"column":0}},{"source":"../node_modules/recursive-watch/index.js","original":{"line":152,"column":0},"generated":{"line":152,"column":0}}],"sources":{"../node_modules/recursive-watch/index.js":"var os = require('os')\nvar fs = require('fs')\nvar path = require('path')\nvar Cache = require('ttl')\n\nvar isLinux = os.platform() === 'linux' // native recursive watching not supported here\nvar watchDirectory = isLinux ? watchFallback : watchRecursive\n\nmodule.exports = watch\n\nfunction watch (name, onchange) {\n  var clear = null\n  var stopped = false\n\n  fs.lstat(name, function (_, st) {\n    if (!st || stopped) {\n      stopped = true\n      return\n    }\n    clear = st.isDirectory() ? watchDirectory(name, onchange) : watchFile(name, onchange)\n  })\n\n  return function () {\n    if (stopped) return\n    stopped = true\n    if (clear) {\n      clear()\n    }\n  }\n}\n\nfunction watchFile (filename, onchange) {\n  var prev = null\n  var prevTime = 0\n\n  var w = fs.watch(filename, function () {\n    fs.lstat(filename, function (_, st) {\n      var now = Date.now()\n      if (now - prevTime > 2000 || !same(st, prev)) onchange(filename)\n      prevTime = now\n      prev = st\n    })\n  })\n\n  return function () {\n    w.close()\n  }\n}\n\nfunction watchRecursive (directory, onchange) {\n  var w = fs.watch(directory, {recursive: true}, function (change, filename) {\n    if (!filename) return // filename not always given (https://nodejs.org/api/fs.html#fs_filename_argument)\n    onchange(path.join(directory, filename))\n  })\n\n  return function () {\n    w.close()\n  }\n}\n\nfunction watchFallback (directory, onchange) {\n  var watching = {}\n  var loaded = false\n  var queued = []\n  var prevs = new Cache({ttl: 2e3, capacity: 30})\n\n  visit('.', function () {\n    loaded = true\n  })\n\n  return function () {\n    Object.keys(watching).forEach(function (dir) {\n      watching[dir].close()\n    })\n  }\n\n  function emit (name) {\n    queued.push(name)\n    if (queued.length === 1) update()\n  }\n\n  function update () {\n    var filename = queued[0]\n\n    fs.lstat(filename, function (err, st) {\n      var w = watching[filename]\n\n      if (err && w) {\n        w.close()\n        delete watching[filename]\n      }\n\n      var prevSt = prevs.get(filename)\n      if (!prevSt || !same(st, prevSt)) onchange(filename)\n      prevs.put(filename, st)\n\n      visit(path.relative(directory, filename), function () {\n        queued.shift()\n        if (queued.length) update()\n      })\n    })\n  }\n\n  function visit (next, cb) {\n    var dir = path.join(directory, next)\n\n    fs.lstat(dir, function (err, st) {\n      if (err || !st.isDirectory()) return cb()\n      if (watching[dir]) return cb()\n      if (loaded) emit(dir)\n\n      var w = fs.watch(dir, function (change, filename) {\n        filename = path.join(next, filename)\n        emit(path.join(directory, filename))\n      })\n\n      w.on('error', noop)\n      watching[dir] = w\n\n      fs.readdir(dir, function (err, list) {\n        if (err) return cb(err)\n\n        loop()\n\n        function loop () {\n          if (!list.length) return cb()\n          visit(path.join(next, list.shift()), loop)\n        }\n      })\n    })\n  }\n}\n\nfunction noop () {}\n\nfunction same (a, b) {\n  if (!a || !b) return false\n  return a.dev === b.dev &&\n    a.mode === b.mode &&\n    a.nlink === b.nlink &&\n    a.uid === b.uid &&\n    a.gid === b.gid &&\n    a.rdev === b.rdev &&\n    a.blksize === b.blksize &&\n    a.ino === b.ino &&\n    // a.size === b.size && DONT TEST - is a lying value\n    // a.blocks === b.blocks && DONT TEST - is a lying value\n    a.atime.getTime() === b.atime.getTime() &&\n    a.mtime.getTime() === b.mtime.getTime() &&\n    a.ctime.getTime() === b.ctime.getTime()\n}\n"},"lineCount":152}},"error":null,"hash":"fe449857e862bc318e5bbf8db4e6e737","cacheData":{"env":{}}}